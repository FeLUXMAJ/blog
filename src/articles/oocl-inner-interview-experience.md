```metadata
{
  "title": "OOCL内部面试经历",
  "date": "2014-11-11 23:01:04",
  "tags": ["Diary"]
}
```




## 面试经历

面试官主观问题：
1. 有关Java线程安全
场景是 当服务器和用户 同时对一个数据进行操作的时候，如何保证 数据的安全是期望修改的形式？具体场景可能是 你在评论一条微博的时候，那个微博被删除了，从线程安全来说 是Java本身具有这种控制现成安全的方法，还是需要自己实现？

这个问题，我想面试官本来是想考 线程锁和 或者Thread的Sync和Volite关键字
，是两个线程同时对共享数据进行操作，是否需要对数据进行上锁。


我当时想的是，在实际项目中主要不是线程锁的问题吧，是如何处理使得当要修改的数据不能访问的时候 为了用户体验一般是怎样处理？抑或说是类似代码版本管理中，如果同时提交了多个分支 默认应该取哪个？然后面试官说，这个问题是类似于版本分支这个概念
 先后顺序，怎样告诉用户的。于是我先回答了个线程锁的概念，然后跳到Android那里 用AsyncTask的概念，线程内部重载doInBackground方法,再通知更新UI。又感觉好像服务器和用户请求之间没有一个权重比较，就说了个用队列去保存请求，然后根据请求的顺序锁起数据，服务器请求在先就先删掉服务器端的数据，然后用户请求到达的时候，返回提示微博可能已被删除，而不刷新页面。用户请求在先，评论请求发送完毕之后，立刻执行服务器的删除微博请求，更新UI的时候以服务器的更新UI方法为重，返回提示微博可能已经被删除。


2. 说说项目中的修改之后 相比以前有没有什么收获比较大的地方
我这里就说之前项目中的内容，在修改使用了Spring MVC架构之后 降低了代码的耦合度，使得能够后台的代码与页面设置分开出来，减少了以后维护代码的成本。然后想到Android开发 本身就是界面，控制器 很系统的分开，就把学习Android的时候的对这种模式的理解。
这里记得逼乎上面有个 解答，我觉得这里的概念有帮助与理解
[http://www.zhihu.com/question/19703369](http://www.zhihu.com/question/19703369)



3. 有关Spring MVC的问题：Spring是单例还是多例?
这个问题跪了。

正确答案是Spring 默认是单例，但是可以通过修改bean里面scope的属性修改，使得在单例中调用多里对象。



半命题自由发挥部分：
1. 说我的项目之前使用MySQL，对数据库的安全操作有没有什么比较深刻的认识？
第一次在项目中用JDBC搞MySQL的CRUD的时候，对数据库的操作是传参数 然后拼接成SQL字符串，这样的漏洞有一个很明显的地方就是注入漏洞，如果在参数里面包含多个其他操作使得原本应该拼接成的字符串实现了其他的数据库操作，就算是被注入了。
后来改成使用PreparedStatement 来操作SQL，他本身能够对传进去的参数进行处理，防止在参数中有SQL关键字和分号，注释符号 等非代码本意的字符串出现。增加了一部分的安全性
然后又说到之前 做项目，添加文章发布功能的时候，要使用可视化文本编辑器，怎么搞图片一边上传的解决方法。

2. 因为我现在主要做的工作是自动化测试脚本的编写，平时回去的时间有没有关注技术，是Java Web方面，Android方面，还是现在的脚本开发...
3. 现在在做的Web自动化测试 你觉得那些方便挑战比较大？
学习过程的挑战目前都被克服了

## 贡献：
1. 改进脚本之间的数据传递方式(Global Sheet --&gt;外部文件xml/Excel)
以前公司的ATF框架 在不同的脚本之前传递数据是通过一个存在内存中的GlobalSheet变量来传递的，我修改了代码之后，使用外部文件比如Excel或者XML来保存要传递的数据，使得脚本执行玩完之后，在生成的报告和排查过程中有了更客观的数据展示。

2. 改进数据驱动方式
之前ATF的数据驱动方式 主要是通过Excel方式来进行数据驱动。但是受限制与WinRunner与QTP本身读取Excel配置文件的限制。使用Excel在数据读取的可观性不够强，而且存在 数组设计，数据说明比较麻烦的情况。后来的改进方法是将数据存在XML里面，XML所具有的特性使得数据更加直观，还能在XML内部提供更好的注释、说明 帮助负责运行脚本的同事修改数据。
使用XML作为数据文件，为以后公司系统统一切换到IRIS4 使用更先进的自动化测试框架 增加了通用的数据模型可用。

3. 修改对象识别的方式
对象库到XPath
之前使用的QTP工具 大多数脚本都是通过对象库来对Web对象进行识别。
但是这样做 代码的可读性上会比较强，但是依赖于工具本身的不可见的内部数据，不利于 根据外部数据来使用和移植

修改成以XPath方式来读取，代码移植性与对象描述能力得到了增强。







